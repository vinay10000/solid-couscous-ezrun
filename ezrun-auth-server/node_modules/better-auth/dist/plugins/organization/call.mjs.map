{"version":3,"file":"call.mjs","names":[],"sources":["../../../src/plugins/organization/call.ts"],"sourcesContent":["import type { GenericEndpointContext } from \"@better-auth/core\";\nimport { createAuthMiddleware } from \"@better-auth/core/api\";\nimport { sessionMiddleware } from \"../../api\";\nimport type { Session, User } from \"../../types\";\nimport type { Role } from \"../access\";\nimport type { defaultRoles } from \"./access/statement\";\nimport type { OrganizationOptions } from \"./types\";\n\nexport const orgMiddleware = createAuthMiddleware(async () => {\n\treturn {} as {\n\t\torgOptions: OrganizationOptions;\n\t\troles: typeof defaultRoles & {\n\t\t\t[key: string]: Role<{}>;\n\t\t};\n\t\tgetSession: (context: GenericEndpointContext) => Promise<{\n\t\t\tsession: Session & {\n\t\t\t\tactiveTeamId?: string | undefined;\n\t\t\t\tactiveOrganizationId?: string | undefined;\n\t\t\t};\n\t\t\tuser: User;\n\t\t}>;\n\t};\n});\n\n/**\n * The middleware forces the endpoint to require a valid session by utilizing the `sessionMiddleware`.\n * It also appends additional types to the session type regarding organizations.\n */\nexport const orgSessionMiddleware = createAuthMiddleware(\n\t{\n\t\tuse: [sessionMiddleware],\n\t},\n\tasync (ctx) => {\n\t\tconst session = ctx.context.session as {\n\t\t\tsession: Session & {\n\t\t\t\tactiveTeamId?: string | undefined;\n\t\t\t\tactiveOrganizationId?: string | undefined;\n\t\t\t};\n\t\t\tuser: User;\n\t\t};\n\t\treturn {\n\t\t\tsession,\n\t\t};\n\t},\n);\n"],"mappings":";;;;;AAQA,MAAa,gBAAgB,qBAAqB,YAAY;AAC7D,QAAO,EAAE;EAaR;;;;;AAMF,MAAa,uBAAuB,qBACnC,EACC,KAAK,CAAC,kBAAkB,EACxB,EACD,OAAO,QAAQ;AAQd,QAAO,EACN,SARe,IAAI,QAAQ,SAS3B;EAEF"}