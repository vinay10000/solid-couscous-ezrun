{"version":3,"file":"sign-out.mjs","names":[],"sources":["../../../src/api/routes/sign-out.ts"],"sourcesContent":["import { createAuthEndpoint } from \"@better-auth/core/api\";\nimport { deleteSessionCookie } from \"../../cookies\";\n\nexport const signOut = createAuthEndpoint(\n\t\"/sign-out\",\n\t{\n\t\tmethod: \"POST\",\n\t\toperationId: \"signOut\",\n\t\trequireHeaders: true,\n\t\tmetadata: {\n\t\t\topenapi: {\n\t\t\t\toperationId: \"signOut\",\n\t\t\t\tdescription: \"Sign out the current user\",\n\t\t\t\tresponses: {\n\t\t\t\t\t\"200\": {\n\t\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\"application/json\": {\n\t\t\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n\tasync (ctx) => {\n\t\tconst sessionCookieToken = await ctx.getSignedCookie(\n\t\t\tctx.context.authCookies.sessionToken.name,\n\t\t\tctx.context.secret,\n\t\t);\n\t\tif (sessionCookieToken) {\n\t\t\ttry {\n\t\t\t\tawait ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n\t\t\t} catch (e) {\n\t\t\t\tctx.context.logger.error(\"Failed to delete session from database\", e);\n\t\t\t}\n\t\t}\n\t\tdeleteSessionCookie(ctx);\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t});\n\t},\n);\n"],"mappings":";;;;AAGA,MAAa,UAAU,mBACtB,aACA;CACC,QAAQ;CACR,aAAa;CACb,gBAAgB;CAChB,UAAU,EACT,SAAS;EACR,aAAa;EACb,aAAa;EACb,WAAW,EACV,OAAO;GACN,aAAa;GACb,SAAS,EACR,oBAAoB,EACnB,QAAQ;IACP,MAAM;IACN,YAAY,EACX,SAAS,EACR,MAAM,WACN,EACD;IACD,EACD,EACD;GACD,EACD;EACD,EACD;CACD,EACD,OAAO,QAAQ;CACd,MAAM,qBAAqB,MAAM,IAAI,gBACpC,IAAI,QAAQ,YAAY,aAAa,MACrC,IAAI,QAAQ,OACZ;AACD,KAAI,mBACH,KAAI;AACH,QAAM,IAAI,QAAQ,gBAAgB,cAAc,mBAAmB;UAC3D,GAAG;AACX,MAAI,QAAQ,OAAO,MAAM,0CAA0C,EAAE;;AAGvE,qBAAoB,IAAI;AACxB,QAAO,IAAI,KAAK,EACf,SAAS,MACT,CAAC;EAEH"}